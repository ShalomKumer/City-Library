/* ========= BookItem (כרטיס ספר) – Refined ========= */

/* משתני צבעים בסיסיים */
:root{
  --card-bg: #fff;
  --card-bg-2: #f8fafc;
  --card-bg-hover: #fafafa;
  --card-text: #0f172a;
  --card-muted: #64748b;
  --card-border: #e2e8f0;
  --focus: #3b82f6;

  --shadow: 0 6px 16px rgba(2,6,23,.08);
  --shadow-hover: 0 14px 30px rgba(2,6,23,.14);
}

@media (prefers-color-scheme: dark){
  :root{
    --card-bg: #111827;
    --card-bg-2: #0f172a;
    --card-bg-hover: #0b1220;
    --card-text: #e5e7eb;
    --card-muted: #9aa7b7;
    --card-border: #1f2a3a;
    --focus: #60a5fa;

    --shadow: 0 8px 20px rgba(0,0,0,.35);
    --shadow-hover: 0 18px 42px rgba(0,0,0,.45);
  }
}

/* הכרטיס עצמו */
.card{
  width: 100%;
  margin: 0;
  opacity: 1;
  transform: none;
}

/* אנימציית כניסה (אופציונלית: הוסף data-animate="in" ל-.card) */
.card[data-animate="in"]{
  animation: book-card-in 320ms cubic-bezier(.2,.65,.3,1) both;
}
@keyframes book-card-in{
  from { opacity: 0; transform: translateY(8px) scale(.985); }
  to   { opacity: 1; transform: none; }
}

/* כל הכרטיס הוא כפתור */
.card > button{
  display: flex;
  flex-direction: column;
  gap: 0; /* שומר על רציפות הקצוות */
  width: 100%;
  background: linear-gradient(180deg, var(--card-bg), var(--card-bg-2));
  color: var(--card-text);
  border: 1px solid var(--card-border);
  border-radius: 16px;
  box-shadow: var(--shadow);
  cursor: pointer;
  text-align: left;
  overflow: hidden;
  transition: transform .2s ease, box-shadow .22s ease, border-color .22s ease, background .22s ease;
  will-change: transform, box-shadow;
}

.card > button:hover{
  transform: translateY(-4px);
  box-shadow: var(--shadow-hover);
  background: linear-gradient(180deg, var(--card-bg-hover), var(--card-bg-2));
  border-color: color-mix(in oklab, var(--card-border) 70%, var(--card-text) 30%);
}

.card > button:focus-visible{
  outline: none;
  box-shadow:
    0 0 0 3px color-mix(in oklab, #fff 45%, var(--focus)),
    var(--shadow-hover);
}

/* אזור התמונה העליון */
.top{
  position: relative;
  width: 100%;
  aspect-ratio: 2 / 3;          /* יחס כריכה נעים לעין */
  background: #eef2f7;
  overflow: hidden;
}

/* שכבת היילייט עדינה על התמונה */
.top::after{
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.03));
  pointer-events: none;
}

.top img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: scale(1.02);
  transition: transform 320ms ease;
  will-change: transform;
}
.card > button:hover .top img{
  transform: scale(1.055) translateY(-1px);
}

/* טעינת שלד (אם אין תמונה עדיין – אופציונלי) */
.top img[alt=""]{
  background:
    linear-gradient(90deg, #e5eaf1 25%, #f1f4f8 37%, #e5eaf1 63%);
  background-size: 400% 100%;
  animation: shimmer 1.1s infinite;
}
@keyframes shimmer { 0%{background-position: 100% 0} 100%{background-position: 0 0} }

/* טקסטים – כותרת ומחבר */
.Taria{
  padding: 14px 16px 8px;
}

/* כותרת: שתי שורות מקסימום עם חיתוך אלגנטי */
.Taria h2{
  margin: 0 0 6px;
  font-size: 1.06rem;
  line-height: 1.35;
  letter-spacing: .2px;
  color: var(--card-text);
  display: -webkit-box;
  -webkit-line-clamp: 2;        /* עד 2 שורות */
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* מחבר: שורה אחת עם אליפסיס */
.Taria h3{
  margin: 0;
  font-size: .95rem;
  color: var(--card-muted);
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* תחתית הכרטיס: שנה / סטטוס / דירוג */
.bottom{
  display: grid;
  grid-template-columns: 1fr auto auto;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  border-top: 1px solid var(--card-border);
  font-size: .88rem;
  color: var(--card-muted);
}

.year p{
  margin: 0;
  font-size: .92rem;
  color: color-mix(in oklab, var(--card-text) 60%, var(--card-muted));
}

/* תג "read" – נייטרלי, עם אפשרות למצבים */
.read{
  justify-self: start;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: .8rem;
  font-weight: 600;
  background: color-mix(in oklab, var(--card-bg) 85%, #f1f5f9);
  color: color-mix(in oklab, var(--card-text) 70%, var(--card-muted));
  border: 1px solid var(--card-border);
  transition: transform .18s ease, box-shadow .22s ease, background .22s ease, color .22s ease;
}
.card > button:hover .read{
  transform: translateY(-1px);
  box-shadow: 0 6px 14px rgba(2,6,23,.08);
}

/* אם יש לך מצבים בכיתה (לא חובה): */
.read.read--yes{
  background: #22c55e;
  color: #fff;
  border-color: #16a34a;
}
.read.read--no{
  background: #fff;
  color: var(--card-muted);
}

/* דירוג (כוכבים + מספר) */
.score{
  justify-self: end;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border: 1px solid var(--card-border);
  border-radius: 10px;
  background: color-mix(in oklab, var(--card-bg) 94%, #fff);
  transition: transform .18s ease, box-shadow .22s ease, border-color .22s ease, background .22s ease;
}
.card > button:hover .score{
  transform: translateY(-1px);
  box-shadow: 0 6px 14px rgba(2,6,23,.08);
}
.score h4{
  margin: 0;
  font-size: .92rem;
  color: var(--card-text);
}

/* רספונסיביות קטנה */
@media (max-width: 420px){
  .Taria{ padding: 12px 12px 6px; }
  .bottom{ padding: 10px 12px; gap: 8px; }
}

/* נגישות – פחות אנימציות */
@media (prefers-reduced-motion: reduce){
  .card,
  .card > button,
  .top img,
  .read,
  .score{
    transition: none !important;
    animation: none !important;
    transform: none !important;
  }
}
